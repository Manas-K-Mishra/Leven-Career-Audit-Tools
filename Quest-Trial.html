```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Career Clarity Quest</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      padding: 2rem;
      color: #333;
      margin: 0;
    }
    .container {
      max-width: 800px;
      width: 100%;
      background: #fff;
      margin: 0 auto;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.05);
      box-sizing: border-box;
    }
    h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .question {
      display: none;
      margin-bottom: 1.5rem;
    }
    .question.active {
      display: block;
    }
    label {
      display: block;
      margin: 0.5rem 0;
    }
    button {
      margin-top: 1.5rem;
      background: #0b3d26;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      min-width: 120px;
      min-height: 44px;
    }
    .result {
      margin-top: 2rem;
      padding: 1rem;
      border-left: 4px solid #0b3d26;
      background: #e4f0ea;
      border-radius: 8px;
      display: none;
    }
    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }
    .intro-screen {
      text-align: center;
      padding: 2rem;
    }
    .intro-screen img {
      max-height: 80px;
      margin-bottom: 1rem;
    }
    #quizForm {
      display: none;
    }
    .progress-bar {
      width: 100%;
      background: #e0e0e0;
      height: 10px;
      border-radius: 5px;
      margin-bottom: 1rem;
    }
    .progress {
      height: 100%;
      background: #0b3d26;
      border-radius: 5px;
      transition: width 0.3s;
    }
    canvas {
      margin-top: 1rem;
      max-width: 100%;
      max-height: 300px;
    }
    @media (max-width: 600px) {
      .container {
        padding: 1rem;
        max-width: 100%;
      }
      button {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
        min-width: 120px;
        min-height: 44px;
      }
      input[type="radio"] {
        width: 20px;
        height: 20px;
        margin-right: 8px;
      }
      label {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="intro-screen" id="introScreen">
      <img src="https://manas-k-mishra.github.io/Leven-Career-Audit-Tools/leven-logo.jpg" alt="Leven Squad Logo" />
      <h2>Career Clarity Quest</h2>
      <p>Explore your career mindset, skills, and goals through 10 insightful questions.</p>
      <button id="startBtn">Start Quest</button>
    </div>

    <form id="quizForm">
      <div class="progress-bar"><div class="progress" id="progress"></div></div>

      <div class="question active">
        <strong>1. What excites you the most?</strong>
        <label><input type="radio" name="q1" value="analyst"> Finding patterns in messy data</label>
        <label><input type="radio" name="q1" value="builder"> Building systems that just work</label>
        <label><input type="radio" name="q1" value="designer"> Designing things users love</label>
        <label><input type="radio" name="q1" value="marketer"> Crafting compelling messages</label>
        <label><input type="radio" name="q1" value="leader"> Leading projects and motivating people</label>
        <label><input type="radio" name="q1" value="operator"> Improving workflows for speed</label>
      </div>

      <div class="question">
        <strong>2. What’s your strongest skill?</strong>
        <label><input type="radio" name="q2" value="analyst"> Analyzing data and trends</label>
        <label><input type="radio" name="q2" value="builder"> Coding or technical problem-solving</label>
        <label><input type="radio" name="q2" value="designer"> Creating visuals or user interfaces</label>
        <label><input type="radio" name="q2" value="marketer"> Writing or presenting persuasively</label>
        <label><input type="radio" name="q2" value="leader"> Planning and decision-making</label>
        <label><input type="radio" name="q2" value="operator"> Organizing tasks and processes</label>
      </div>

      <div class="question">
        <strong>3. What matters most in a job?</strong>
        <label><input type="radio" name="q3" value="analyst"> Intellectual challenge</label>
        <label><input type="radio" name="q3" value="builder"> Building tangible solutions</label>
        <label><input type="radio" name="q3" value="designer"> Creative freedom</label>
        <label><input type="radio" name="q3" value="marketer"> Influencing others</label>
        <label><input type="radio" name="q3" value="leader"> Leadership opportunities</label>
        <label><input type="radio" name="q3" value="operator"> Stability and efficiency</label>
      </div>

      <div class="question">
        <strong>4. Scenario: You’re offered two jobs. Which do you choose?</strong>
        <label><input type="radio" name="q4" value="analyst"> High-paying data role at a corporate firm, but repetitive tasks</label>
        <label><input type="radio" name="q4" value="builder"> Startup role building tools, lower pay but high impact</label>
        <label><input type="radio" name="q4" value="designer"> Creative role at a design agency, moderate pay</label>
        <label><input type="radio" name="q4" value="marketer"> Marketing role with travel, variable pay</label>
        <label><input type="radio" name="q4" value="leader"> Leadership role at a nonprofit, modest pay</label>
        <label><input type="radio" name="q4" value="operator"> Operations role with clear structure, good benefits</label>
      </div>

      <div class="question">
        <strong>5. What’s your education level or plan?</strong>
        <label><input type="radio" name="q5" value="analyst"> Degree in STEM or data-focused field</label>
        <label><input type="radio" name="q5" value="builder"> Technical training or self-taught coding</label>
        <label><input type="radio" name="q5" value="designer"> Design or arts education</label>
        <label><input type="radio" name="q5" value="marketer"> Marketing or communications degree</label>
        <label><input type="radio" name="q5" value="leader"> Business or leadership-focused education</label>
        <label><input type="radio" name="q5" value="operator"> General or operations-focused education</label>
      </div>

      <div class="question">
        <strong>6. How do you handle stress?</strong>
        <label><input type="radio" name="q6" value="analyst"> Break problems into data-driven parts</label>
        <label><input type="radio" name="q6" value="builder"> Build tools to simplify tasks</label>
        <label><input type="radio" name="q6" value="designer"> Use creativity to find solutions</label>
        <label><input type="radio" name="q6" value="marketer"> Communicate to align teams</label>
        <label><input type="radio" name="q6" value="leader"> Delegate and prioritize strategically</label>
        <label><input type="radio" name="q6" value="operator"> Streamline processes to reduce chaos</label>
      </div>

      <div class="question">
        <strong>7. What’s your work environment preference?</strong>
        <label><input type="radio" name="q7" value="analyst"> Quiet, focused, data-heavy setting</label>
        <label><input type="radio" name="q7" value="builder"> Collaborative tech environment</label>
        <label><input type="radio" name="q7" value="designer"> Creative studio or flexible space</label>
        <label><input type="radio" name="q7" value="marketer"> Dynamic, client-facing setting</label>
        <label><input type="radio" name="q7" value="leader"> Leadership-driven, strategic meetings</label>
        <label><input type="radio" name="q7" value="operator"> Organized, process-driven office</label>
      </div>

      <div class="question">
        <strong>8. Random Event: A mentor offers you a chance to pivot. What do you pursue?</strong>
        <label><input type="radio" name="q8" value="analyst"> Data science bootcamp</label>
        <label><input type="radio" name="q8" value="builder"> Software engineering internship</label>
        <label><input type="radio" name="q8" value="designer"> UX/UI design course</label>
        <label><input type="radio" name="q8" value="marketer"> Digital marketing apprenticeship</label>
        <label><input type="radio" name="q8" value="leader"> Leadership development program</label>
        <label><input type="radio" name="q8" value="operator"> Operations management training</label>
      </div>

      <div class="question">
        <strong>9. What’s your long-term career goal?</strong>
        <label><input type="radio" name="q9" value="analyst"> Become an expert in data insights</label>
        <label><input type="radio" name="q9" value="builder"> Build innovative tech solutions</label>
        <label><input type="radio" name="q9" value="designer"> Create user-friendly designs</label>
        <label><input type="radio" name="q9" value="marketer"> Lead marketing for a major brand</label>
        <label><input type="radio" name="q9" value="leader"> Run a company or division</label>
        <label><input type="radio" name="q9" value="operator"> Optimize large-scale operations</label>
      </div>

      <div class="question">
        <strong>10. Reflect: What’s one career aspiration you have? (Type below)</strong>
        <textarea name="q10" rows="4" style="width:100%; margin-top:0.5rem;"></textarea>
      </div>

      <div class="navigation">
        <button type="button" id="prevBtn" style="display:none;">Back</button>
        <button type="button" id="nextBtn">Next</button>
      </div>

      <button type="button" id="submitBtn" style="display:none;">Reveal My Career Path</button>
    </form>

    <div class="result" id="resultBox"></div>
    <canvas id="resultChart"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Verify jsPDF and Chart.js loading
    window.addEventListener('load', () => {
      if (!window.jspdf || !window.jspdf.jsPDF) {
        console.error("jsPDF failed to load");
        alert("PDF generation library failed to load. Please refresh the page or check your connection.");
      }
      if (!window.Chart) {
        console.error("Chart.js failed to load");
      }
    });

    // Randomization functions
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function randomizeOptions() {
      const questions = document.querySelectorAll('.question');
      for (let i = 0; i < 9; i++) {
        const question = questions[i];
        const labels = Array.from(question.querySelectorAll('label'));
        const shuffledLabels = shuffleArray(labels);
        labels.forEach(label => label.remove());
        const questionText = question.querySelector('strong');
        shuffledLabels.forEach(label => question.insertBefore(label, questionText.nextSibling));
      }
    }

    document.addEventListener('DOMContentLoaded', randomizeOptions);

    function startQuiz(event) {
      event.preventDefault();
      console.log("Start Quiz button clicked");
      const introScreen = document.getElementById("introScreen");
      const quizForm = document.getElementById("quizForm");
      if (introScreen && quizForm) {
        introScreen.style.display = "none";
        quizForm.style.display = "block";
        showStep(0);
        updateProgress();
      } else {
        console.error("Intro screen or quiz form not found");
      }
    }

    const form = document.getElementById('quizForm');
    const questions = document.querySelectorAll('.question');
    const resultBox = document.getElementById('resultBox');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const submitBtn = document.getElementById('submitBtn');
    const progress = document.getElementById('progress');
    let currentStep = 0;

    function updateProgress() {
      const percent = (currentStep / (questions.length - 1)) * 100;
      progress.style.width = `${percent}%`;
    }

    function showStep(step) {
      questions.forEach((q, i) => q.classList.toggle('active', i === step));
      prevBtn.style.display = step > 0 ? 'inline-block' : 'none';
      nextBtn.style.display = step < questions.length - 1 ? 'inline-block' : 'none';
      submitBtn.style.display = step === questions.length - 1 ? 'inline-block' : 'none';
      updateProgress();
    }

    const startBtn = document.getElementById('startBtn');
    if (startBtn) {
      startBtn.addEventListener('click', startQuiz);
    } else {
      console.error("Start button not found");
    }

    nextBtn.addEventListener('click', () => {
      const currentQuestion = questions[currentStep];
      const input = currentQuestion.querySelector('input[type="radio"]:checked') || currentQuestion.querySelector('textarea').value.trim();
      if (!input && currentQuestion.querySelector('textarea') === null) {
        alert('Please select an option before proceeding.');
        return;
      }
      if (currentStep < questions.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    });

    function handleSubmission() {
      console.log("Submit button clicked");
      try {
        for (let i = 0; i < questions.length - 1; i++) {
          const question = questions[i];
          const selected = question.querySelector('input[type="radio"]:checked');
          if (!selected) {
            alert(`Please answer question ${i + 1} before submitting.`);
            showStep(i);
            return;
          }
        }

        const scores = { analyst: 0, builder: 0, designer: 0, marketer: 0, leader: 0, operator: 0 };
        const weights = { q3: 1.5, q4: 2, q9: 1.5 };
        const formData = new FormData(form);
        const aspiration = formData.get('q10') || 'Not specified';

        for (let [key, value] of formData.entries()) {
          if (key !== 'q10') {
            const weight = weights[key] || 1;
            scores[value] += weight;
          }
        }

        const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
        const primary = sorted[0][0];
        const secondary = sorted[1][0];

        const careerPaths = {
          analyst: {
            title: "Insight Architect",
            description: "You thrive on data and clarity. Careers like Data Scientist, Business Analyst, or Researcher suit you.",
            roles: ["Entry: Data Analyst", "Advanced: Data Scientist, Machine Learning Engineer"],
            skills: ["Learn Python/R", "Take a Data Science course (e.g., Coursera)", "Practice SQL"],
            resources: ["Coursera Data Science", "Kaggle competitions"]
          },
          builder: {
            title: "System Engineer",
            description: "You love building solutions. Software Engineer, DevOps, or Product Developer roles are ideal.",
            roles: ["Entry: Junior Developer", "Advanced: Software Architect, CTO"],
            skills: ["Learn JavaScript/Python", "Build a GitHub portfolio", "Explore cloud platforms"],
            resources: ["freeCodeCamp", "AWS certifications"]
          },
          designer: {
            title: "Experience Creator",
            description: "You create user-friendly designs. UX/UI Designer or Graphic Designer roles fit you.",
            roles: ["Entry: UI Designer", "Advanced: UX Lead, Creative Director"],
            skills: ["Learn Figma", "Study design principles", "Build a portfolio"],
            resources: ["Dribbble for inspiration", "Coursera UX Design"]
          },
          marketer: {
            title: "Growth Catalyst",
            description: "You excel at communication. Growth Marketing, Content Creator, or PR roles are your path.",
            roles: ["Entry: Marketing Coordinator", "Advanced: CMO, Brand Strategist"],
            skills: ["Learn SEO", "Practice copywriting", "Study analytics"],
            resources: ["HubSpot Academy", "Google Analytics certification"]
          },
          leader: {
            title: "Strategic Captain",
            description: "You guide teams and strategy. Product Manager, Entrepreneur, or Executive roles suit you.",
            roles: ["Entry: Associate PM", "Advanced: CEO, Strategy Director"],
            skills: ["Study leadership frameworks", "Practice public speaking", "Learn finance"],
            resources: ["Harvard Business Review", "Toastmasters"]
          },
          operator: {
            title: "Execution Maestro",
            description: "You optimize processes. Operations Manager or Project Manager roles are ideal.",
            roles: ["Entry: Operations Coordinator", "Advanced: COO, Supply Chain Manager"],
            skills: ["Learn project management tools", "Study Lean Six Sigma", "Practice time management"],
            resources: ["PMI certifications", "Trello/Asana tutorials"]
          }
        };

        const resultText = `
          <strong>Your Career Path: ${careerPaths[primary].title} with ${careerPaths[secondary].title} tendencies</strong><br>
          <p>${careerPaths[primary].description}</p>
          <p><strong>Secondary Fit:</strong> ${careerPaths[secondary].description}</p>
          <p><strong>Recommended Roles:</strong> ${careerPaths[primary].roles.join(", ")}</p>
          <p><strong>Skills to Develop:</strong> ${careerPaths[primary].skills.join(", ")}</p>
          <p><strong>Resources:</strong> ${careerPaths[primary].resources.map(r => `<a href="https://www.${r.split(' ')[0].toLowerCase()}.com" target="_blank">${r}</a>`).join(", ")}</p>
          <p><strong>Your Aspiration:</strong> ${aspiration}</p>
          <p><strong>Reflection:</strong> Does this path align with your goals? Consider how your aspiration (“${aspiration}”) fits with ${careerPaths[primary].title} or ${careerPaths[secondary].title} roles.</p>
          <button id="downloadBtn">Download Career Action Plan</button>
        `;
        resultBox.innerHTML = resultText;
        resultBox.style.display = 'block';
        form.style.display = 'none';
        console.log("Results displayed successfully");

        const downloadBtn = document.getElementById('downloadBtn');
        if (downloadBtn) {
          downloadBtn.addEventListener('click', () => downloadActionPlan(primary, secondary, aspiration));
        } else {
          console.error("Download button not found in resultBox");
          alert("Download button not found. Please refresh the page.");
        }

        try {
          new Chart(document.getElementById('resultChart'), {
            type: 'pie',
            data: {
              labels: ['Analyst', 'Builder', 'Designer', 'Marketer', 'Leader', 'Operator'],
              datasets: [{
                data: [scores.analyst, scores.builder, scores.designer, scores.marketer, scores.leader, scores.operator],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40']
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: { position: 'top' },
                title: { display: true, text: 'Your Career Mindset Breakdown' }
              }
            }
          });
          console.log("Chart rendered successfully");
        } catch (error) {
          console.error("Error rendering chart:", error);
        }
      } catch (error) {
        console.error("Submission error:", error);
        alert("An error occurred while processing your results. Please check the console for details.");
      }
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      console.log("Form submit event triggered");
      handleSubmission();
    });

    submitBtn.addEventListener('click', () => {
      console.log("Submit button click event triggered");
      handleSubmission();
    });

    function downloadActionPlan(primary, secondary, aspiration) {
      console.log("Download Action Plan button clicked");
      try {
        if (!window.jspdf || !window.jspdf.jsPDF) {
          throw new Error("jsPDF library not loaded");
        }
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const pageWidth = doc.internal.pageSize.getWidth();
        let yPos = 20;

        const careerPaths = {
          analyst: {
            title: "Insight Architect",
            description: "You thrive on data and clarity. Careers like Data Scientist, Business Analyst, or Researcher suit you.",
            roles: ["Entry: Data Analyst", "Advanced: Data Scientist, Machine Learning Engineer"],
            skills: ["Learn Python/R", "Take a Data Science course (e.g., Coursera)", "Practice SQL"],
            resources: ["Coursera Data Science", "Kaggle competitions"]
          },
          builder: {
            title: "System Engineer",
            description: "You love building solutions. Software Engineer, DevOps, or Product Developer roles are ideal.",
            roles: ["Entry: Junior Developer", "Advanced: Software Architect, CTO"],
            skills: ["Learn JavaScript/Python", "Build a GitHub portfolio", "Explore cloud platforms"],
            resources: ["freeCodeCamp", "AWS certifications"]
          },
          designer: {
            title: "Experience Creator",
            description: "You create user-friendly designs. UX/UI Designer or Graphic Designer roles fit you.",
            roles: ["Entry: UI Designer", "Advanced: UX Lead, Creative Director"],
            skills: ["Learn Figma", "Study design principles", "Build a portfolio"],
            resources: ["Dribbble for inspiration", "Coursera UX Design"]
          },
          marketer: {
            title: "Growth Catalyst",
            description: "You excel at communication. Growth Marketing, Content Creator, or PR roles are your path.",
            roles: ["Entry: Marketing Coordinator", "Advanced: CMO, Brand Strategist"],
            skills: ["Learn SEO", "Practice copywriting", "Study analytics"],
            resources: ["HubSpot Academy", "Google Analytics certification"]
          },
          leader: {
            title: "Strategic Captain",
            description: "You guide teams and strategy. Product Manager, Entrepreneur, or Executive roles suit you.",
            roles: ["Entry: Associate PM", "Advanced: CEO, Strategy Director"],
            skills: ["Study leadership frameworks", "Practice public speaking", "Learn finance"],
            resources: ["Harvard Business Review", "Toastmasters"]
          },
          operator: {
            title: "Execution Maestro",
            description: "You optimize processes. Operations Manager or Project Manager roles are ideal.",
            roles: ["Entry: Operations Coordinator", "Advanced: COO, Supply Chain Manager"],
            skills: ["Learn project management tools", "Study Lean Six Sigma", "Practice time management"],
            resources: ["PMI certifications", "Trello/Asana tutorials"]
          }
        };

        doc.setFontSize(16);
        doc.text("Career Clarity Quest - Action Plan", pageWidth / 2, yPos, { align: 'center' });
        yPos += 10;
        doc.setLineWidth(0.5);
        doc.line(20, yPos, pageWidth - 20, yPos);
        yPos += 10;

        doc.setFontSize(12);
        doc.text(`Primary Career Path: ${careerPaths[primary].title}`, 20, yPos);
        yPos += 7;
        doc.text(`Description: ${careerPaths[primary].description}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Recommended Roles: ${careerPaths[primary].roles.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Skills to Develop: ${careerPaths[primary].skills.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Resources: ${careerPaths[primary].resources.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 15;

        doc.text(`Secondary Career Path: ${careerPaths[secondary].title}`, 20, yPos);
        yPos += 7;
        doc.text(`Description: ${careerPaths[secondary].description}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Recommended Roles: ${careerPaths[secondary].roles.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Skills to Develop: ${careerPaths[secondary].skills.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Resources: ${careerPaths[secondary].resources.join(", ")}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 15;

        doc.text(`Your Aspiration: ${aspiration}`, 20, yPos, { maxWidth: pageWidth - 40 });
        yPos += 10;
        doc.text(`Reflection: Consider how your aspiration (“${aspiration}”) aligns with ${careerPaths[primary].title} or ${careerPaths[secondary].title} roles.`, 20, yPos, { maxWidth: pageWidth - 40 });

        // Try direct download
        try {
          doc.save('Career_Action_Plan.pdf');
          console.log("PDF download triggered successfully");
        } catch (error) {
          console.error("Direct download failed:", error);
          // Fallback: Open in new tab
          try {
            doc.output('dataurlnewwindow');
            console.log("PDF opened in new tab as fallback");
          } catch (fallbackError) {
            console.error("Fallback failed:", fallbackError);
            alert("Failed to download or open PDF. Please check the console for details.");
          }
        }
      } catch (error) {
        console.error("Error generating PDF:", error);
        alert("Failed to generate PDF. Please check the console for details or refresh the page.");
      }
    }
  </script>
</body>
</html>
```